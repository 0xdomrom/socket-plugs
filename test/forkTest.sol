pragma solidity 0.8.13;

import "forge-std/Test.sol";
import "forge-std/console.sol";

import "../contracts/bridge/Controller.sol";
import {UpdateLimitParams} from "../contracts/common/Structs.sol";
import "openzeppelin-contracts/contracts/token/ERC20/IERC20.sol";
import {LyraTSADepositHook, LimitHook} from "../contracts/hooks/lyra/LyraTSAHooks.sol";
import "../contracts/bridge/Base.sol";

contract LyraForkTest is Test {
    address caller = 0xFDC28fA368c33DEC7853d63B65FC5Cfe01B212fc;
    address plug = 0x993eF5d9E4341AE0437a8F02dcA614687123acAB;

    function setUp() external {}

    function testFork() external {
        //        vm.deal(address(caller), 1 ether);
        //        vm.startPrank(caller);

        //        (bool success, ) = plug.call(
        //            abi.encodeWithSignature(
        //                "inbound(uint32,bytes)",
        //                901,
        //                hex"000000000000000000000000e43288c8e020817ab77155271238704f8276405e00000000000000000000000000000000000000000000000000038d7ea4c6800000066eee993ef5d9e4341ae0437a8f02dca614687123acab000000000000030f0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000004000000000000000000000000046b76a41d42968a5dbc44f7c998308f7936ed8b8000000000000000000000000486c887352e9afe3d81d6643c65c1cf68a781b18"
        //            )
        //        );
        //        assertTrue(success, "function call failed");
        vm.deal(address(0xB176A44D819372A38cee878fB0603AEd4d26C5a5), 1 ether);
        vm.startPrank(0xB176A44D819372A38cee878fB0603AEd4d26C5a5);

        _call(
            0x12A3674207E345c79e1AD67F62e3988e6bb06287,
            hex"aad48d80000000000000000000000000f7c3e76ec6e7dd24ee8ad5d72155ba94573c51b60000000000000000000000000000000000000000000000000000000000000000"
        );
        _call(
            0xbF7591de71cAf166269744A370379B0178E3c732,
            hex"aad48d8000000000000000000000000093af64374181da2e924951621e99b960a44f0f3c0000000000000000000000000000000000000000000000000000000000000000"
        );

        _call(0xF7C3e76Ec6E7Dd24EE8Ad5d72155BA94573c51B6, hex"3bd1adec");
        _call(
            0xF7C3e76Ec6E7Dd24EE8Ad5d72155BA94573c51B6,
            hex"2f2ff15d129109734c476f17817fbe7bcf461de566dcce58e4c0cb61b62d1b9af26fe47f000000000000000000000000b176a44d819372a38cee878fb0603aed4d26c5a5"
        );
        _call(
            0xF7C3e76Ec6E7Dd24EE8Ad5d72155BA94573c51B6,
            hex"2bc9c08a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000687e1c385740841a1a30ea53bf272664edc57d9b0000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687e1c385740841a1a30ea53bf272664edc57d9b0000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000941ce45a3ec4ec6c0d14afa726af6c788fc5a7170000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000941ce45a3ec4ec6c0d14afa726af6c788fc5a7170000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000010000000000000000000000007af8efddca5c70c49808615837478ed6c94c9dc80000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000000000000000000000000000007af8efddca5c70c49808615837478ed6c94c9dc80000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda000000000000000000000000000000000000000000000000000000000000000100000000000000000000000064ae91d75630de44bb283abf2a74dce471ff02c40000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064ae91d75630de44bb283abf2a74dce471ff02c40000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda000000000000000000000000000000000000000000000000000000000000000100000000000000000000000082d599c4982301d3ce26b2adcb67602dfa0b9f230000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082d599c4982301d3ce26b2adcb67602dfa0b9f230000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c162b9d815f2e81962d4014e4535b55af4085ea50000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c162b9d815f2e81962d4014e4535b55af4085ea50000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda"
        );
        _call(
            0xF7C3e76Ec6E7Dd24EE8Ad5d72155BA94573c51B6,
            hex"74f86ade000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000001000000000000000000000000000000000000000000000000000000000000a4b1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000099c388bd0e9eaa68965a0000000000000000000000000000000000000000000000a38bfaf748c419c6895"
        );

        _call(0x93af64374181DA2e924951621E99B960A44f0F3c, hex"3bd1adec");
        _call(
            0x93af64374181DA2e924951621E99B960A44f0F3c,
            hex"2f2ff15d129109734c476f17817fbe7bcf461de566dcce58e4c0cb61b62d1b9af26fe47f000000000000000000000000b176a44d819372a38cee878fb0603aed4d26c5a5"
        );
        _call(
            0x93af64374181DA2e924951621E99B960A44f0F3c,
            hex"2bc9c08a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000d4ab8ab74327d4dcfaf6b4b27593fc38b2f8af5f0000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d4ab8ab74327d4dcfaf6b4b27593fc38b2f8af5f0000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000010000000000000000000000001bc1b3772761e56da7d108f369dc44fb2c479e160000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000000000000000000000000000001bc1b3772761e56da7d108f369dc44fb2c479e160000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000cc8164e11ffbcd7d341cd1f8de0f55fd86c3b5570000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc8164e11ffbcd7d341cd1f8de0f55fd86c3b5570000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000920f9d2f7aae6dfc4aedfa10a07776c70db06f250000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000920f9d2f7aae6dfc4aedfa10a07776c70db06f250000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000010000000000000000000000004211ff84a54b455c28dec6e2b15324ba445959a90000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda00000000000000000000000000000000000000000000000000000000000000000000000000000000000000004211ff84a54b455c28dec6e2b15324ba445959a90000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000099d6030a8880a21da6fdcb68443db6d3de96be80000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099d6030a8880a21da6fdcb68443db6d3de96be80000000000000000000000000000000000000000033b2e3c9fd0803ce80000000000000000000000000000000000000000000000000002736e8b484c3b584bda"
        );

        _call(
            0x4b71552b8A5E0F681FD6b468023279902f98956E,
            hex"74f86ade0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000010000a4b100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000e3a5e171e8ba384a9"
        );
    }

    function _call(address target, bytes memory data) internal {
        (bool success, ) = target.call(data);
        assertTrue(success, "function call failed");
    }
}
